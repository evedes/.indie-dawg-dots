#!/bin/bash

# Interactive menu for Ghostty customization

MENU_OPTIONS="1. Change Theme
2. Change Background Color
3. Reset to Default
4. Exit"

SELECTION=$(echo "$MENU_OPTIONS" | fzf --prompt="Ghostty Settings: " --height=10 --reverse)

case "$SELECTION" in
    "1. Change Theme")
        ~/.local/bin/ghostty-theme-switcher
        ;;
    "2. Change Background Color")
        ~/.local/bin/ghostty-bg-picker
        ;;
    "3. Reset to Default")
        CONFIG_FILE="$HOME/.indie-dawg-dots/common/ghostty/config.common"
        TEMP_FILE=$(mktemp)
        sed 's/^theme = .*/theme = "Kanagawa Dragon"/' "$CONFIG_FILE" | \
        sed 's/^background = .*/background = "#001"/' > "$TEMP_FILE"
        mv "$TEMP_FILE" "$CONFIG_FILE"
        echo "Reset to default theme and background"
        echo "Restart Ghostty for changes to take effect"
        ;;
    "4. Exit"|"")
        exit 0
        ;;
esac